rem logical_workplaces.tab
rem by Lucas Gitirana on 2023-04-12
rem

CREATE TABLE LOGICAL_WORKPLACES (
id number(38) not null,
parent_id number(38),
id_context varchar2(100) not null,
workplace_type_id number not null,
code varchar2(30) not null,
name varchar2(80) not null,
active_date date DEFAULT SYSDATE not null,
inactive_date date DEFAULT '31-12-9999' not null
);

CREATE SEQUENCE LOGICAL_WORKPLACES_ID START WITH 1;

ALTER TABLE LOGICAL_WORKPLACES ADD
CONSTRAINTS LOGICAL_WORKPLACES_PK
PRIMARY KEY (id)
USING INDEX;

ALTER TABLE LOGICAL_WORKPLACES ADD
CONSTRAINTS LOGICAL_WORKPLACES_FK1
FOREIGN KEY (parent_id) REFERENCES LOGICAL_WORKPLACES(id);

ALTER TABLE LOGICAL_WORKPLACES ADD
CONSTRAINTS LOGICAL_WORKPLACES_FK2
FOREIGN KEY (workplace_type_id) REFERENCES WORKPLACE_TYPES(id);

ALTER TABLE LOGICAL_WORKPLACES ADD
CONSTRAINTS LOGICAL_WORKPLACES_UK1
UNIQUE (id_context)
USING INDEX;

ALTER TABLE LOGICAL_WORKPLACES ADD
CONSTRAINTS LOGICAL_WORKPLACES_UK2
UNIQUE (code, name, active_date)
USING INDEX;